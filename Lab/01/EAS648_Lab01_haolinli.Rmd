---
title: "EAS648_Lab01_haolinli"
author: "Haolin Li (haolinli@umich.edu)"
date: "2023-10-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd("D:/UMich/Fall23/EAS648/Repo/Lab/01")
```

## Part I: Tutorials form class

This sections mainly focus on following the instructions of the lab tutorial and trying out all the code.

### Loading lib

```{r}
library(ggplot2)
library(sf)

library(tidyverse)
```

### Start Loading Data

```{r}
boulder = st_read("Data/BoulderSocialMedia.shp")

head(boulder)
```

### Plot the variables using ggplot2 and geom_xx() functions

```{r}
ggplot() +
    geom_sf(data =boulder, fill = NA, alpha = .2) +
    theme_bw()
```

### Reproject the data

Project the data using an appropriate projection for Colorado. Use the epsg.io website for choosing the an appropriate projection

```{r}
# transforming the current projection
boulder = st_transform(boulder, 26753)
ggplot() +
    geom_sf(data =boulder,
    fill = NA, alpha = .2) +
    theme_bw()
```

### Changing Symbologies

Adding ‘Gradient colour scales’ in ggplot2. Here is the documentation of these options https://ggplot2.tidyverse.org/reference/scale_gradient.html.

```{r}
# show elevation in color based on PT_Elev field
ggplot() +
    geom_sf(data =boulder, aes(color=PT_Elev),
    fill = NA, alpha = .2) +
    theme_bw()
```

Using another color scale:

```{r}
# using scale_colour_gradientn
ggplot() +
    geom_sf(data =boulder, aes(color=PT_Elev),
    fill = NA, alpha = .2) +
  scale_colour_gradientn(colours = terrain.colors(10)) +  
  theme_bw()
```


Select Data
```{r}
#library(dplyer)
boulder %>%
    mutate(high_elev = ifelse(PT_Elev >= 2200, TRUE, FALSE))%>% 
ggplot() +
  geom_sf(aes(color=high_elev),
    fill = NA, alpha = .2)  +  
  theme_bw()
```

Additional


```{r}
library(sf)
library(ggspatial)
library(viridis)

ggplot() +
    geom_sf(data = boulder, aes(color=PT_Elev),
    fill = NA, alpha = .2) + 
    scale_colour_gradientn(colours = magma(10))

```

Plot discrete values:
```{r}
summary(boulder$DB)

p <- ggplot() +
  annotation_spatial(boulder) +
  layer_spatial(boulder, aes(col = DB))
p + scale_color_brewer(palette = "Dark2")
```

TMaps

```{r}
library(tmap)

## Add the data - these are specific to the vector or raster
tm_shape(boulder) + 
  ## which variable, is there a class interval, palette, and other options
  tm_symbols(col='PT_Elev', 
             style='quantile', 
             palette = 'YlOrRd',
             border.lwd = NA,
             size = 0.1)
```

Adding 

```{r}
## here we are using a simple dataset of the world 
# tmap_mode("plot")
data("World")
tm_shape(World) +
    tm_polygons("gdp_cap_est", style='quantile', legend.title = "GDP Per Capita Estimate")
```



## Part II: Completing the tasks


